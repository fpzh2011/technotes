# Go语言基础

## 值还是引用？

### 值保存方式

一般变量都是值保存方式，如int等。

数组、struct等也是值保存方式。

### 引用保存方式

map、slice切片、接口等都是引用保存方式。（[1]，P108，P113；[2] P66）


问题？？？？？？？？？？？？？？？？？？？？
查询一个map，返回的value也是引用方式吗？？？？？（rule.go中的CreateBranch函数，是因为value是指针类型。如果是struct呢，如果是int呢）
比如可以直接操作：`mymap["abc"] = 123`，这个是另一种情况？


### 指针

指向struct的指针p，可以直接用`.`访问成员变量，如`p.value = 1`。

rp util.Hash 如果对传入的string进行修改，会影响原来的string对象吗？？？？？？？？？？？？（[1]，P108）


### 垃圾回收

Go语言没有析构函数。在函数中定义的Constructors and composite literals，其地址可以作为函数返回值。如果没有其它变量引用了，由运行时自动回收、释放。
Go语言规范中并没有提及Stack和Heap的概念。编译器可以判断是应该放在栈中，还是放到Heap中；或者，可能每次对复合变量取地址，都会生成一个新的实例？
参考：
	https://golang.org/doc/effective_go.html#composite_literals
	http://stackoverflow.com/questions/10866195/stack-vs-heap-allocation-of-structs-in-go-and-how-they-relate-to-garbage-collec


## 切片Slice

切片是Go语言的基础概念（[3], P4）。


## 数据封装

Go没有`public private`等数据可见性的修饰关键字。要使某个符号对其它包可见，需要将该包定义为大写字母开头。Go语言中符号的可访问性是包一级，而不是类型一级的。（[2] P71）

## 变量

变量会在声明时直接初始化。如果变量没有显式初始化，则被隐式地赋予其类型的零值（zero value），数值类型是0，字符串类型是空字符串""（[3], P5）。

`:=`可以不带`var`关键字，但是需要在声明同时初始化（[3], P5）。

## 代码格式

Go语言不需要在语句或者声明的末尾添加分号，除非一行上有多条语句。（[3], P3）
实际上，编译器会主动把特定符号后的换行符转换为分号, 因此换行符添加的位置会影响Go代码的正确解析（[3], P3）。
举个例子, 函数的左括号`{`必须和`func`函数声明在同一行上, 且位于末尾，不能独占一行。


if for等语句，条件等可以不必用括号封起来。当然，如果避免误输入，封起来也是可以得。

用缩进表示代码结构？？？

函数的多个返回值。

## 类与面向对象

Go不支持继承，没有类的层次结构。甚至没有“类”，通过Composition组合来构造复杂对象（[3] Preface, xv）。

方法不仅可以定义在结构体上, 而且, 可以定义在任何用户自定义的类型上；并且, 具体类型和抽象类型（接口）之间的关系是隐式的，所以很多类型的设计者可能并不知道该类型到底实现了哪些接口。

## 包管理

Go语言的代码通过包（package）组织，包类似于其它语言里的库（libraries）或者模块（modules）。（[3], P2）

Go的包可以有目录层次。

代码开始的`package main`表示该文件属于哪个包。

`import`声明导入需要的包。但**如果导入了不需要的包**，程序也会无法编译通过。（[3], P3）
import声明必须跟在文件的package声明之后。

`main`包比较特殊。它定义了一个独立可执行的程序，而不是一个库。
在main包里的 main 函数也很特殊，它是整个程序执行时的入口。（[3], P2）

包导入顺序并不重要；gofmt工具格式化时按照字母顺序对包名排序（[3], P4）。

包导入有两种形式：
```go
import (
	"fmt"
	"os"
)
```

或
```go
import fmt
import os
```

按照惯例，我们在每个包的包声明前添加注释（[3], P5）。

## 运行、编译

`go run my.go`
这个命令编译一个或多个以.go结尾的源文件，链接库文件，并运行最终生成的可执行文件。但该可执行文件不会保存下来。

`go build my.go`
这个命令生成并保存可执行的二进制文件。

## 命令行参数

os.Args变量是一个字符串（string）的切片（[3], CH1.2, P4）。
os.Args的第一个元素，os.Args[0], 是命令本身的名字；其它的元素则是程序启动时传给它的参数。


## 问题

struct与class的区别是什么？有class关键字吗？


## 参考资料

[1] Go语言程序设计
[2] Go语言编程
[3] The Go Programming Language
