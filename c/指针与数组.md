# 指针与数组

## 指针与数组的不同

在一个源文件中定义一个全局数组：

	int a[10] = {3,4,5,6,7,8,9,0};

在另一个源文件中引用该数组：

	#include <stdio.h>
	
	//extern int *a;	//编译、链接正常。运行报错：段错误(吐核)
	extern int a[];		//正常运行
	
	int 
	main () {
		*a = 1;
		printf("%d\n", *a);
	}

错误根源：使用指针声明一个外部数组。

原因是：编译器在生成指令时，指针需要比数组多一次寻址。
如果声明为数组，编译器直接用a的地址（链接后是重定位的地址）赋值，即将整数1放到a指向的地址。
但如果声明为指针，则要先从a指向的地址获取指针的值，再将整数1放到指针指向的地址。

因为使用者的声明与定义者不一样，生成了错误的指令，导致段访问异常。

## 参考资料

C专家编程，Ch4


